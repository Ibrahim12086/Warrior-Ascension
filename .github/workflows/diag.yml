name: CI Diagnose

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  diag:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Repo root listing
        run: ls -la

      - name: Android dir listing
        run: ls -la android || echo "android/ not found"

      - name: Show workflow file (android.yml)
        run: cat .github/workflows/android.yml || echo "android.yml not found"

      - name: Show first 200 lines of build log (if exists)
        run: test -f android_build.log && head -n 200 android_build.log || echo "no android_build.log"

      - name: Java and Gradle
        run: |
          java -version || true
          gradle -v || true
